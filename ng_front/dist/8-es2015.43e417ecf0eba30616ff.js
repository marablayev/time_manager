(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{Ywk0:function(e,t,b){"use strict";b.r(t),b.d(t,"NewsModule",(function(){return _}));var i=b("ofXK"),o=b("tyNb"),n=b("fktz"),c=b("3Pt+"),a=b("wd/R"),l=b("fXoL"),r=b("h5qW"),d=b("KI+Z"),s=b("K3ix");function m(e,t){if(1&e){const e=l.Qb();l.Pb(0,"tr"),l.Pb(1,"td"),l.Ac(2),l.Ob(),l.Pb(3,"td"),l.Ac(4),l.Ob(),l.Pb(5,"td"),l.Ac(6),l.Ob(),l.Pb(7,"td"),l.Ac(8),l.Zb(9,"date"),l.Ob(),l.Pb(10,"td"),l.Ac(11),l.Ob(),l.Pb(12,"td",15),l.Pb(13,"div",16),l.Pb(14,"div",17),l.Pb(15,"button",18),l.Wb("click",(function(){l.qc(e);const b=t.$implicit,i=l.Yb(),o=l.nc(25);return i.openModal(o,b)})),l.Kb(16,"i",19),l.Ob(),l.Ob(),l.Pb(17,"div",17),l.Pb(18,"button",20),l.Wb("click",(function(){l.qc(e);const b=t.$implicit,i=l.Yb(),o=l.nc(29);return i.openModal(o,b)})),l.Kb(19,"i",21),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Ob()}if(2&e){const e=t.$implicit,b=t.index;l.xb(2),l.Bc(b+1),l.xb(2),l.Bc(e.employee_name),l.xb(2),l.Bc(e.title),l.xb(2),l.Bc(l.bc(9,5,e.date_time,"yyyy-MM-dd HH:mm")),l.xb(3),l.Bc(e.employees_notified?"\u0414\u0430":"\u041d\u0435\u0442")}}function u(e,t){if(1&e&&(l.Pb(0,"div",46),l.Kb(1,"div",47),l.Ob()),2&e){const e=l.Yb(2);l.wc("background-image","url("+e.activeNews.image+")")("margin-bottom","20px")}}function f(e,t){1&e&&(l.Pb(0,"div",48),l.Ac(1,"\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e"),l.Ob())}function p(e,t){1&e&&(l.Pb(0,"div",48),l.Ac(1,"\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e"),l.Ob())}function v(e,t){if(1&e&&(l.Pb(0,"div",49),l.Kb(1,"img",50),l.Pb(2,"span"),l.Ac(3),l.Ob(),l.Ob()),2&e){const e=t.$implicit;l.xb(1),l.fc("src",e.data.photo||"assets/img/no-photo.png",l.sc),l.xb(2),l.Cc(" ",e.data.full_name," ")}}function O(e,t){1&e&&l.Ac(0," \u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e ")}function P(e,t){1&e&&(l.Pb(0,"div",48),l.Ac(1,"\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e"),l.Ob())}function g(e,t){if(1&e){const e=l.Qb();l.Pb(0,"button",51),l.Wb("click",(function(){return l.qc(e),l.Yb(2).handleImage(null)})),l.Ac(1,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0444\u043e\u0442\u043e"),l.Ob()}}function h(e,t){if(1&e){const e=l.Qb();l.Pb(0,"label",52),l.Pb(1,"button",53),l.Ac(2,"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u043e\u0442\u043e"),l.Ob(),l.Pb(3,"input",54),l.Wb("change",(function(t){return l.qc(e),l.Yb(2).handleImage(t.target.files[0])})),l.Ob(),l.Ob()}}function y(e,t){if(1&e){const e=l.Qb();l.Pb(0,"div",22),l.Pb(1,"div",23),l.Pb(2,"h4",24),l.Ac(3),l.Ob(),l.Pb(4,"button",25),l.Wb("click",(function(){return l.qc(e),l.Yb(),l.nc(25).hide()})),l.Pb(5,"span",26),l.Ac(6,"\xd7"),l.Ob(),l.Ob(),l.Ob(),l.Pb(7,"div",27),l.yc(8,u,2,4,"div",28),l.Pb(9,"form",29),l.Pb(10,"div",30),l.Pb(11,"label",31),l.Ac(12,"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"),l.Ob(),l.Pb(13,"div",32),l.Kb(14,"input",33),l.yc(15,f,2,0,"div",34),l.Ob(),l.Ob(),l.Pb(16,"div",30),l.Pb(17,"label",31),l.Ac(18,"\u0422\u0435\u043a\u0441\u0442"),l.Ob(),l.Pb(19,"div",32),l.Kb(20,"input",35),l.yc(21,p,2,0,"div",34),l.Ob(),l.Ob(),l.Pb(22,"div",30),l.Pb(23,"label",31),l.Ac(24,"\u0412\u0441\u0435 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0438"),l.Ob(),l.Pb(25,"div",32),l.Pb(26,"div",36),l.Pb(27,"label"),l.Kb(28,"input",37),l.Kb(29,"span",38),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Pb(30,"div",30),l.Pb(31,"label",31),l.Ac(32,"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432"),l.Ob(),l.Pb(33,"div",32),l.Pb(34,"ngx-select",39),l.Wb("data",(function(){return l.qc(e),l.Yb().value})),l.yc(35,v,4,2,"ng-template",40),l.yc(36,O,1,0,"ng-template",41),l.Ob(),l.yc(37,P,2,0,"div",34),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Pb(38,"div",42),l.Pb(39,"button",43),l.Wb("click",(function(){return l.qc(e),l.Yb(),l.nc(25).hide()})),l.Ac(40,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),l.Ob(),l.yc(41,g,2,0,"button",44),l.yc(42,h,4,0,"label",45),l.Pb(43,"button",3),l.Wb("click",(function(t){l.qc(e);const b=l.Yb();return b.submitForm(t,b.valForm.value)})),l.Ac(44,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),l.Ob(),l.Ob(),l.Ob()}if(2&e){const e=l.Yb();l.xb(3),l.Bc(e.activeNews.title),l.xb(5),l.ec("ngIf",e.activeNews.image),l.xb(1),l.ec("formGroup",e.valForm),l.xb(6),l.ec("ngIf",e.valForm.controls.title.hasError("required")&&(e.valForm.controls.title.dirty||e.valForm.controls.title.touched)),l.xb(6),l.ec("ngIf",e.valForm.controls.text.hasError("required")&&(e.valForm.controls.text.dirty||e.valForm.controls.text.touched)),l.xb(13),l.ec("multiple",!0)("items",e.employees),l.xb(3),l.ec("ngIf",e.valForm.controls.employees_to_notify.hasError("required")&&(e.valForm.controls.employees_to_notify.dirty||e.valForm.controls.employees_to_notify.touched)),l.xb(4),l.ec("ngIf",e.activeNews.image),l.xb(1),l.ec("ngIf",!e.activeNews.image)}}function w(e,t){if(1&e){const e=l.Qb();l.Pb(0,"div",22),l.Pb(1,"div",23),l.Pb(2,"h4",24),l.Ac(3),l.Ob(),l.Pb(4,"button",25),l.Wb("click",(function(){return l.qc(e),l.Yb(),l.nc(29).hide()})),l.Pb(5,"span",26),l.Ac(6,"\xd7"),l.Ob(),l.Ob(),l.Ob(),l.Pb(7,"div",27),l.Pb(8,"div",55),l.Pb(9,"div",46),l.Kb(10,"div",47),l.Ob(),l.Pb(11,"table",56),l.Pb(12,"tbody"),l.Pb(13,"tr"),l.Pb(14,"td"),l.Pb(15,"strong"),l.Ac(16,"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f"),l.Ob(),l.Ob(),l.Pb(17,"td"),l.Ac(18),l.Zb(19,"date"),l.Ob(),l.Ob(),l.Pb(20,"tr"),l.Pb(21,"td"),l.Pb(22,"strong"),l.Ac(23,"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"),l.Ob(),l.Ob(),l.Pb(24,"td"),l.Ac(25),l.Ob(),l.Ob(),l.Pb(26,"tr"),l.Pb(27,"td"),l.Pb(28,"strong"),l.Ac(29,"\u0422\u0435\u043a\u0441\u0442"),l.Ob(),l.Ob(),l.Pb(30,"td"),l.Ac(31),l.Ob(),l.Ob(),l.Pb(32,"tr"),l.Pb(33,"td"),l.Pb(34,"strong"),l.Ac(35,"\u0421\u043e\u0437\u0434\u0430\u043b"),l.Ob(),l.Ob(),l.Pb(36,"td"),l.Ac(37),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Pb(38,"div",42),l.Pb(39,"button",43),l.Wb("click",(function(){return l.qc(e),l.Yb(),l.nc(29).hide()})),l.Ac(40,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),l.Ob(),l.Ob(),l.Ob()}if(2&e){const e=l.Yb();l.xb(3),l.Bc(e.activeNews.title),l.xb(6),l.wc("background-image",e.activeNews.image?"url("+e.activeNews.image+")":""),l.xb(9),l.Bc(l.bc(19,7,e.activeNews.date_timee,"yyyy-MM-dd HH:mm")),l.xb(7),l.Bc(e.activeNews.title),l.xb(6),l.Bc(e.activeNews.text),l.xb(6),l.Bc(e.activeNews.employee_name)}}let x=(()=>{class e{constructor(e,t){this.dataService=e,this.value={},this.bsValue=new Date,this.maxDate=new Date,this.bsConfig={},this.mytime=new Date,this.valForm=t.group({title:[null,c.s.required],employees_to_notify:[null,c.s.required],all_employees:[!1],text:[null]}),this.employees=[]}ngOnInit(){this.dataService.getNews().subscribe(e=>{this.newss=e.results}),this.dataService.getEmployees().subscribe(e=>{this.employees=e.results})}openModal(e,t){this.newImage=null,this.imageDeleted=!1,this.activeNews=t,this.modal=e;let b={};for(let i in this.valForm.controls)"date"!=i&&"time"!=i&&(b[i]=t[i]);this.activeNews.id||(b={all_employees:!1,title:"",employees_to_notify:[],text:""}),this.valForm.setValue(b),e.show()}submitForm(e,t){e.preventDefault();for(let o in this.valForm.controls)this.valForm.controls[o].markAsTouched();let b;const i=new FormData;for(let o in t)if(Array.isArray(t[o]))for(let e of t[o])i.append(o,e);else t[o]instanceof Date?i.append(o,a(t[o]).format("YYYY-MM-DD HH:mm:ss")):i.append(o,t[o]);this.newImage&&i.append("image",this.newImage),this.imageDeleted&&i.append("removed_image","true"),b=this.activeNews.id?this.dataService.updateNewsData(i,this.activeNews.id):this.dataService.createNewsData(i),b.subscribe(e=>{this.activeNews=e,this.dataService.getNews().subscribe(e=>{this.newss=e.results,this.modal.hide()})})}handleImage(e){e?(this.imageDeleted=!1,this.newImage=e,this.activeNews.image=URL.createObjectURL(e)):(this.imageDeleted=!0,this.activeNews.image=null)}}return e.\u0275fac=function(t){return new(t||e)(l.Jb(r.a),l.Jb(c.c))},e.\u0275cmp=l.Db({type:e,selectors:[["app-news"]],decls:32,vars:3,consts:[[1,"content-heading"],[1,"nav","nav-pills","my-3"],[1,"ml-auto"],["type","button",1,"btn","btn-primary",3,"click"],[1,"card","card-default"],[1,"table-responsive"],["id","table-ext-1",1,"table","table-bordered","table-hover"],["checkAll",""],[4,"ngFor","ngForOf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","mySmallModalLabel","aria-hidden","true",1,"modal","fade"],["detailModal","bs-modal"],[1,"modal-dialog","modal-lg"],["class","modal-content",4,"ngIf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","viewModal","aria-hidden","true",1,"modal","fade"],["viewModal","bs-modal"],[1,"text-center","view-button"],[1,"row"],[1,"col-md-5"],["type","button",1,"btn","btn-warning","btn-sm",3,"click"],["aria-hidden","true",1,"fa","icon-pencil","fa-lg"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-eye","fa-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["class","card-body text-center bg-center",3,"background-image","margin-bottom",4,"ngIf"],["role","form","name","loginForm","novalidate","",1,"form-validate","mb-3",3,"formGroup"],[1,"form-group","row"],[1,"text-bold","col-xl-2","col-md-3","col-4","col-form-label","text-right"],[1,"col-xl-10","col-md-9","col-8"],["type","text","name","title","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a","autocomplete","off","formControlName","title",1,"form-control"],["class","text-danger",4,"ngIf"],["type","text","name","text","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435","autocomplete","off","formControlName","text",1,"form-control"],[1,"checkbox","c-checkbox"],["type","checkbox","formControlName","all_employees"],[1,"fa","fa-check"],["placeholder","\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432","formControlName","employees_to_notify",3,"multiple","items","data"],["ngx-select-option-selected","","ngx-select-option",""],["ngx-select-option-not-found",""],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button","class","btn btn-danger",3,"click",4,"ngIf"],["for","file2","class","file-upload",4,"ngIf"],[1,"card-body","text-center","bg-center"],[1,"row",2,"height","200px"],[1,"text-danger"],[1,"select-employee-item"],["alt","Image",1,"circle","thumb24",3,"src"],["type","button",1,"btn","btn-danger",3,"click"],["for","file2",1,"file-upload"],["type","button",1,"btn","btn-info"],["id","file1","type","file","ng2FileSelect","",3,"change"],[1,"card","b"],[1,"table"]],template:function(e,t){if(1&e){const e=l.Qb();l.Pb(0,"div",0),l.Ac(1,"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"),l.Ob(),l.Pb(2,"ul",1),l.Pb(3,"li",2),l.Pb(4,"button",3),l.Wb("click",(function(){l.qc(e);const b=l.nc(25);return t.openModal(b,{})})),l.Ac(5,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),l.Ob(),l.Ob(),l.Ob(),l.Pb(6,"div",4),l.Pb(7,"div",5),l.Pb(8,"table",6),l.Pb(9,"thead"),l.Pb(10,"tr"),l.Pb(11,"th"),l.Ac(12,"#"),l.Ob(),l.Pb(13,"th"),l.Ac(14,"\u0421\u043e\u0437\u0434\u0430\u043b"),l.Ob(),l.Pb(15,"th"),l.Ac(16,"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"),l.Ob(),l.Pb(17,"th"),l.Ac(18,"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f"),l.Ob(),l.Pb(19,"th"),l.Ac(20,"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0438 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u044b"),l.Ob(),l.Kb(21,"th",7),l.Ob(),l.Ob(),l.Pb(22,"tbody"),l.yc(23,m,20,8,"tr",8),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Pb(24,"div",9,10),l.Pb(26,"div",11),l.yc(27,y,45,10,"div",12),l.Ob(),l.Ob(),l.Pb(28,"div",13,14),l.Pb(30,"div",11),l.yc(31,w,41,10,"div",12),l.Ob(),l.Ob()}2&e&&(l.xb(23),l.ec("ngForOf",t.newss),l.xb(4),l.ec("ngIf",t.activeNews),l.xb(4),l.ec("ngIf",t.activeNews))},directives:[d.a,i.l,s.a,i.m,c.u,c.k,c.e,c.b,c.j,c.d,c.a,n.a,n.e,n.c,n.d],pipes:[i.e],styles:[".table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{vertical-align:middle}.view-button[_ngcontent-%COMP%]{width:7%}.select-employee-item[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}"]}),e})();var A=b("PCNd");const N=[{path:"",component:x}],k={optionValueField:"id",optionTextField:"name",keepSelectedItems:!1};let _=(()=>{class e{}return e.\u0275mod=l.Hb({type:e}),e.\u0275inj=l.Gb({factory:function(t){return new(t||e)},imports:[[A.a,i.c,o.e.forChild(N),n.b.forRoot(k)],o.e]}),e})()}}]);